シナリオ
===

ユーザー登録
---

- ユーザーがメールアドレスを登録すると確認用 URL が発行され、登録されたメールアドレス宛に送られる
    - `temporary_users`/`emails` にレコード登録
    - メールアドレスに対して有効な `temporary_users` あるいは `users` が存在する場合は登録できない旨エラーがユーザーに返される
- ユーザーは一定期間内に確認用 URL にアクセスし、希望するユーザーキー/ユーザー名/パスワードを登録するとユーザー登録が完了する
    - `temporary_users` のレコードを削除
    - `users` にレコード登録
    - `user_emails` にレコード登録
    - `passwords` にレコード登録
- 確認用 URL は一定期間すぎると無効化する
    - `temporary_users` のレコードを削除

ログイン・認証
---

- ユーザーはメールアドレスまたはユーザーキーのいずれかとパスワードで認証する
    - `users`/`user_emails`/`passwords` のレコードを参照する
- ユーザーは現在のものと異なるパスワードに変更できる
    - `passwords` を更新

退会
---

- ユーザーが退会すると、ユーザー情報が削除される
    - `users`/`passwords`/`user_emails` のレコードを削除
